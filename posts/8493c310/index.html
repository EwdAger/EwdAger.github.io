
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pandas笔记-基础篇 - Gvoidy</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="EwdAger gvoidy 机器学习,"> 
    <meta name="description" content="SeriesSeries是一种类似一维数组的对象，由一组数据和一组与之相关的数据索引组成
In [9]: obj = Series([4,7,-5,3])

In [10]: obj.index
O,"> 
    <meta name="author" content="EwdAger"> 
    <link rel="alternative" href="atom.xml" title="Gvoidy" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">
    <link rel="stylesheet" href="/css/obsidian.css">
    <link rel="stylesheet" href="/css/ball-atom.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
</html>

<body class="loading">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Gvoidy</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://ewdager.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">Pandas笔记-基础篇</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/cover.jpg);">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/机器学习笔记"><b>「
                    </b>机器学习笔记<b> 」</b></a>
                
                八月 26, 2019
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/posts/8493c310/" title="Pandas笔记-基础篇">Pandas笔记-基础篇</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    15k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    14 mins.
                </span>
                
                
                <span id="/posts/8493c310/" class="leancloud_visitors" data-flag-title="Pandas笔记-基础篇">
                    <b class="iconfont icon-read"></b> <i>阅读次数</i>
                    <i class="leancloud-visitors-count">1000000</i>
                </span>
                
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Pandas/">Pandas</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Python/">Python</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/数据分析/">数据分析</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h1 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h1><p><code>Series</code>是一种类似一维数组的对象，由一组数据和一组与之相关的数据索引组成</p>
<pre><code class="python">In [9]: obj = Series([4,7,-5,3])

In [10]: obj.index
Out[10]: RangeIndex(start=0, stop=4, step=1)

In [11]: obj.values
Out[11]: array([ 4,  7, -5,  3], dtype=int64)

In [12]: obj2 = Series([4,7,-5,3], index=[&#39;d&#39;,&#39;b&#39;,&#39;c&#39;,&#39;a&#39;])

In [13]: obj2.index
Out[13]: Index([&#39;d&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;], dtype=&#39;object&#39;)

In [14]: obj2[&#39;a&#39;]
Out[14]: 3

In [15]: obj2[[&#39;c&#39;,&#39;b&#39;,&#39;a&#39;]]
Out[15]:
c   -5
b    7
a    3
dtype: int64

</code></pre>
<p>Numpy 数组运算都会保留索引和值之间的链接，但这些操作并不会改变原<code>Series</code>本身（与<code>ndarray</code>的选区操作相对）</p>
<pre><code class="python">In [19]: obj2[obj2&gt;0]
Out[19]:
d    4
b    7
a    3
dtype: int64

In [20]: obj2 * 2
Out[20]:
d     8
b    14
c   -10
a     6
dtype: int64

In [23]: np.exp(obj2)
Out[23]:
d      54.598150
b    1096.633158
c       0.006738
a      20.085537
dtype: float64

</code></pre>
<p>还可以将<code>Series</code>看成一个定长的有序字典，因为它是索引值到数据值的一个映射。它可以用在许多原本需要的字典参数函数中。</p>
<pre><code class="python">In [26]: obj2
Out[26]:
d    4
b    7
c   -5
a    3
dtype: int64

In [27]: &#39;d&#39; in obj2
Out[27]: True

In [28]: 4 in obj2
Out[28]: False

In [29]: 4 in obj2.values
Out[29]: True
</code></pre>
<p>所有数据被放在一个Python字典中时，也可以直接用这个字典来创建<code>Series</code>。如果只传入一个字典，结果<code>Series</code>的索引就是原字典的键（有序排列）。</p>
<pre><code class="python">In [30]: sdata = {&#39;Ohio&#39;: 3500, &#39;Texas&#39;: 71000, &#39;Oregon&#39;: 16000, &#39;Utah&#39;:5000}

In [31]: obj3 = Series(sdata)

In [32]: obj3
Out[32]:
Ohio       3500
Texas     71000
Oregon    16000
Utah       5000
dtype: int64

In [33]: status = [&#39;California&#39;, &#39;Ohio&#39;, &#39;Oregon&#39;, &#39;Texas&#39;]

# 跟索引相匹配的3个值会被找出来并放到相应的位置是，如果找不到值就为NaN
In [34]: obj4 = Series(sdata, index=status)

In [35]: obj4
Out[35]:
California        NaN
Ohio           3500.0
Oregon        16000.0
Texas         71000.0
dtype: float64
</code></pre>
<p><code>Series</code>可用<code>pd.isnull</code>或<code>obj4.isnull()</code>两种方式判断是否为空</p>
<pre><code class="python">In [36]: pd.isnull(obj4)
Out[36]:
California     True
Ohio          False
Oregon        False
Texas         False
dtype: bool

In [37]: pd.notnull(obj4)
Out[37]:
California    False
Ohio           True
Oregon         True
Texas          True
dtype: bool

In [38]: obj4.isnull()
Out[38]:
California     True
Ohio          False
Oregon        False
Texas         False
dtype: bool
</code></pre>
<p><code>Series</code>还有个重要的特征就是进行数学运算的时候会自动对齐不同索引的数据。</p>
<pre><code class="python">In [41]: obj4+obj3
Out[41]:
California         NaN
Ohio            7000.0
Oregon         32000.0
Texas         142000.0
Utah               NaN
dtype: float64
</code></pre>
<p><code>Series</code>对象本身和索引都有一个<code>Name</code>属性，<code>Series</code>的索引可以通过赋值的方式修改。</p>
<pre><code class="python">In [42]: obj4
Out[42]:
California        NaN
Ohio           3500.0
Oregon        16000.0
Texas         71000.0
dtype: float64

In [43]: obj4.name = &#39;population&#39;

In [44]: obj4.index.name = &#39;state&#39;

In [45]: obj4
Out[45]:
state
California        NaN
Ohio           3500.0
Oregon        16000.0
Texas         71000.0
Name: population, dtype: float64

In [46]: obj.index
Out[46]: RangeIndex(start=0, stop=4, step=1)

In [47]: obj.index = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]

In [48]: obj
Out[48]:
a    4
b    7
c   -5
d    3
dtype: int64
</code></pre>
<h1 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h1><p><code>DataFrame</code>可以被看做有<code>Series</code>组成的字典（共用一个索引），构建<code>DataFrame</code>最常用的方法是直接传入一个由等长列表或Numpy数组组成的字典。</p>
<pre><code class="python">In [49]: data = {&#39;state&#39;: [&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Nevada&#39;, &#39;Nevada&#39;],
    ...: &#39;year&#39;: [2000, 2001, 2002, 2001, 2002],
    ...: &#39;pop&#39;: [1.5, 1.7, 3.6, 2.4, 2.9]}

In [50]: frame = DataFrame(data)

In [51]: frame
Out[51]:
    state  year  pop
0    Ohio  2000  1.5
1    Ohio  2001  1.7
2    Ohio  2002  3.6
3  Nevada  2001  2.4
4  Nevada  2002  2.9
</code></pre>
<p>当传入的列在数据中找不到时，就会产生NA值。<code>DataFrame</code>还可以通过类似字典标记的方式或属性的方式获取<code>DataFrame</code>为一个<code>Series</code>。<em>但使用属性的方式有可能与预留方法名重名，推荐使用字典标记方式</em></p>
<pre><code class="python">In [53]: frame2 = DataFrame(data, columns=[&#39;year&#39;, &#39;state&#39;, &#39;pop&#39;, &#39;debt&#39;], ind
    ...: ex=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;
    ...: ])

In [54]: frame2
Out[54]:
       year   state  pop debt
one    2000    Ohio  1.5  NaN
two    2001    Ohio  1.7  NaN
three  2002    Ohio  3.6  NaN
four   2001  Nevada  2.4  NaN
five   2002  Nevada  2.9  NaN

In [57]: frame2.state
Out[57]:
one        Ohio
two        Ohio
three      Ohio
four     Nevada
five     Nevada
Name: state, dtype: object

In [58]: frame2[&#39;state&#39;]
Out[58]:
one        Ohio
two        Ohio
three      Ohio
four     Nevada
five     Nevada
Name: state, dtype: object
</code></pre>
<p><code>DataFrame</code>支持给某一列附上一个标量的值或者一组值。将列表或者数组赋值给某个列时，其长度必须与<code>DataFrame</code>长度匹配。如果赋值的是<code>Series</code>，就会精准匹配<code>DataFrame</code>的索引，所有空位都将被填上缺失值。</p>
<pre><code class="python">In [75]: frame2[&#39;debt&#39;] = 1

In [76]: frame2
Out[76]:
       year   state  pop  debt
one    2000    Ohio  1.5     1
two    2001    Ohio  1.7     1
three  2002    Ohio  3.6     1
four   2001  Nevada  2.4     1
five   2002  Nevada  2.9     1

In [77]: frame2[&#39;debt&#39;] = np.arange(5.)

In [78]: frame2
Out[78]:
       year   state  pop  debt
one    2000    Ohio  1.5   0.0
two    2001    Ohio  1.7   1.0
three  2002    Ohio  3.6   2.0
four   2001  Nevada  2.4   3.0
five   2002  Nevada  2.9   4.0
</code></pre>
<h2 id="索引对象"><a href="#索引对象" class="headerlink" title="索引对象"></a>索引对象</h2><p><code>DataFrame</code>的<code>index</code>是不可以直接修改的，即<code>frame.index[1] = 5</code>是不可取的。以下提供了<code>index</code>的方法和属性</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>append</td>
<td>链接另一个index对象，产生一个新的index</td>
</tr>
<tr>
<td>diff</td>
<td>计算差集，并得到一个index</td>
</tr>
<tr>
<td>intersection</td>
<td>计算交集</td>
</tr>
<tr>
<td>union</td>
<td>计算并集</td>
</tr>
<tr>
<td>isin</td>
<td>计算一个指示各值是否都包含在参数集合中的布尔型数组</td>
</tr>
<tr>
<td>delete</td>
<td>删除索引i处的元素，并的到新的index</td>
</tr>
<tr>
<td>drop</td>
<td>删除传入的值，并得到新的index</td>
</tr>
<tr>
<td>insert</td>
<td>将元素插入到索引i处，并得到新的index</td>
</tr>
<tr>
<td>is_monotonic</td>
<td>当个元素均大于等于前一个元素时，返回True</td>
</tr>
<tr>
<td>is_union</td>
<td>当index没有重复值时，返回True</td>
</tr>
<tr>
<td>unique</td>
<td>计算index中唯一值得数组</td>
</tr>
</tbody>
</table>
<h1 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h1><h2 id="重新索引"><a href="#重新索引" class="headerlink" title="重新索引"></a>重新索引</h2><p><code>reindex</code>可以创建一个适应新索引的新对象。</p>
<pre><code class="python">In [86]: obj = Series([4.5, 7.2, -5.3, 3.6], index=[&#39;d&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;])

In [87]: obj
Out[87]:
d    4.5
b    7.2
a   -5.3
c    3.6
dtype: float64

In [88]: obj.reindex([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;], fill_value=0)
Out[88]:
a   -5.3
b    7.2
c    3.6
d    4.5
e    0.0
dtype: float64
</code></pre>
<p><code>reindex</code>重新索引时还可以做一些插值处理，<code>method</code>选项即可达到此目的，例如<code>ffill</code>就可以实现向前填充值。</p>
<pre><code class="python">In [90]: obj3
Out[90]:
0      blue
2    purple
4    yellow
dtype: object

In [91]: obj3.reindex(range(6), method=&#39;ffill&#39;)
Out[91]:
0      blue
1      blue
2    purple
3    purple
4    yellow
5    yellow
dtype: object
</code></pre>
<p><code>reindex</code>中可用的<code>method</code>选项如下：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ffill、pad</td>
<td>向前填充（或搬运）值</td>
</tr>
<tr>
<td>bfill、backfill</td>
<td>向后填充（或搬运）值</td>
</tr>
</tbody>
</table>
<p><code>reindex</code>函数的参数<br>参数 | 说明<br>index | 用作索引的新序列<br>method | 插值（填充）方式<br>fill_value | 在重新索引过程中，需要引入缺失值时使用的替代值<br>limit | 向前或向后填充时的最大值<br>level | 在MultiIndex的指定级别上匹配简单索引，否则选取其子集<br>copy | 默认True，无论何时都复制；如果为False，则新旧相等就不复制</p>
<h2 id="丢弃制定轴上的项"><a href="#丢弃制定轴上的项" class="headerlink" title="丢弃制定轴上的项"></a>丢弃制定轴上的项</h2><p>使用<code>drop</code>方法可以丢弃某条轴上一个或多个项</p>
<pre><code class="python">In [94]: frame.drop(0)
Out[94]:
    state  year  pop
1    Ohio  2001  1.7
2    Ohio  2002  3.6
3  Nevada  2001  2.4
4  Nevada  2002  2.9

In [95]: frame.drop(&#39;state&#39;, axis=1)
Out[95]:
   year  pop
0  2000  1.5
1  2001  1.7
2  2002  3.6
3  2001  2.4
4  2002  2.9
</code></pre>
<h2 id="索引、选取和过滤"><a href="#索引、选取和过滤" class="headerlink" title="索引、选取和过滤"></a>索引、选取和过滤</h2><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>obj[val]</td>
<td>选取DataFrame的单个列或一组列，在一些特殊情况下回比较便利：布尔型数组（过滤行）、切片（行切片）、布尔型DataFrame（根据条件设置值）</td>
</tr>
<tr>
<td>obj.ix[val]</td>
<td>选取DataFrame的单个行或一组行</td>
</tr>
<tr>
<td>obj.ix[:, val]</td>
<td>选取单个列或列子集</td>
</tr>
<tr>
<td>obj.ix[val1, val2]</td>
<td>同时选取行和列</td>
</tr>
<tr>
<td>reindex方法</td>
<td>将一个或多个轴匹配到新索引</td>
</tr>
<tr>
<td>xs方法</td>
<td>根据标签选取单行或单列，并返回一个Series</td>
</tr>
<tr>
<td>icol、irow</td>
<td>根据整数位置选取单列或单行，并返回一个Series</td>
</tr>
<tr>
<td>get_value、set_value方法</td>
<td>根据行标签和列标签选取单个值</td>
</tr>
</tbody>
</table>
<h2 id="算术运算和数据对齐"><a href="#算术运算和数据对齐" class="headerlink" title="算术运算和数据对齐"></a>算术运算和数据对齐</h2><p><code>pandas</code>最重要的一个功能是，它可以对不同索引的对象进行算术运算。在将对象相加时，如果存在不同的索引，则结果的索引就是该索引对的并集。自动的数据对齐操作在不重叠的索引处引入了NA值。</p>
<h2 id="在算术方法中填充值"><a href="#在算术方法中填充值" class="headerlink" title="在算术方法中填充值"></a>在算术方法中填充值</h2><p>不使用<code>+</code>可以使用<code>add</code>方法进行相加，其中可以添加<code>fill_value</code>参数填充索引不重叠产生的缺省值。</p>
<pre><code class="python">In [14]: df1
Out[14]:
     a    b     c     d
0  0.0  1.0   2.0   3.0
1  4.0  5.0   6.0   7.0
2  8.0  9.0  10.0  11.0

In [15]: df2
Out[15]:
      a     b     c     d     e
0   0.0   1.0   2.0   3.0   4.0
1   5.0   6.0   7.0   8.0   9.0
2  10.0  11.0  12.0  13.0  14.0
3  15.0  16.0  17.0  18.0  19.0

In [16]: df1.add(df2, fill_value=0)
Out[16]:
      a     b     c     d     e
0   0.0   2.0   4.0   6.0   4.0
1   9.0  11.0  13.0  15.0   9.0
2  18.0  20.0  22.0  24.0  14.0
3  15.0  16.0  17.0  18.0  19.0
</code></pre>
<p>灵活的算术方法</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>add</td>
<td>加法</td>
</tr>
<tr>
<td>sub</td>
<td>减法</td>
</tr>
<tr>
<td>div</td>
<td>除法</td>
</tr>
<tr>
<td>mul</td>
<td>乘法</td>
</tr>
</tbody>
</table>
<h2 id="DataFrame和Series之间的运算"><a href="#DataFrame和Series之间的运算" class="headerlink" title="DataFrame和Series之间的运算"></a>DataFrame和Series之间的运算</h2><p>默认情况下，<code>DataFrame</code>和<code>Series</code>之间的算术运算会将Series的索引匹配到<code>DataFrame</code>的列然后沿着行一直向下广播：</p>
<pre><code class="python">In [17]: df1
Out[17]:
     a    b     c     d
0  0.0  1.0   2.0   3.0
1  4.0  5.0   6.0   7.0
2  8.0  9.0  10.0  11.0

In [19]: s1 = df1.iloc[1]

In [20]: s1
Out[20]:
a    4.0
b    5.0
c    6.0
d    7.0
Name: 1, dtype: float64

In [21]: df1 - s1
Out[21]:
     a    b    c    d
0 -4.0 -4.0 -4.0 -4.0
1  0.0  0.0  0.0  0.0
2  4.0  4.0  4.0  4.0
</code></pre>
<p>如果希望匹配行并在列上广播，则必须使用算术运算方法</p>
<pre><code class="python">In [24]: df1
Out[24]:
     a    b     c     d
0  0.0  1.0   2.0   3.0
1  4.0  5.0   6.0   7.0
2  8.0  9.0  10.0  11.0

In [25]: s1 = Series([1,2,3], index=[0,1,2])

In [26]: s1
Out[26]:
0    1
1    2
2    3
dtype: int64

In [27]: df1.add(s1, axis=0)
Out[27]:
      a     b     c     d
0   1.0   2.0   3.0   4.0
1   6.0   7.0   8.0   9.0
2  11.0  12.0  13.0  14.0
</code></pre>
<h2 id="函数应用和映射"><a href="#函数应用和映射" class="headerlink" title="函数应用和映射"></a>函数应用和映射</h2><ol>
<li><code>Numpy</code>的<code>ufuncs</code>也可用于操作<code>pandas</code>对象</li>
<li>也可用<code>DataFrame</code>的<code>apply</code>方法实现</li>
</ol>
<pre><code class="python">In [29]: frame
Out[29]:
               b         c         d
Utah   -0.677682  0.247555  0.145010
Ohio   -0.120664  0.618269  1.170003
Texas   0.692635 -1.465877  0.432430
Oregon -0.103928  1.032560  1.944111

# Numpy的ufuncs
In [30]: np.abs(frame)
Out[30]:
               b         c         d
Utah    0.677682  0.247555  0.145010
Ohio    0.120664  0.618269  1.170003
Texas   0.692635  1.465877  0.432430
Oregon  0.103928  1.032560  1.944111

In [31]: f = lambda x: x.max() - x.min()

# apply方法
In [32]: frame.apply(f)
Out[32]:
b    1.370317
c    2.498437
d    1.799101
dtype: float64

In [33]: frame.apply(f, axis=1)
Out[33]:
Utah      0.925237
Ohio      1.290666
Texas     2.158512
Oregon    2.048038
dtype: float64
</code></pre>
<p>处理元素级的Python函数，可以使用<code>applymap</code>(对于DataFrame)，对于<code>Series</code>可以使用<code>map</code>方法</p>
<pre><code class="python">In [34]: f2 = lambda x: &#39;%.2f&#39; % x

# 对DataFrame
In [35]: frame.applymap(f2)
Out[35]:
            b      c     d
Utah    -0.68   0.25  0.15
Ohio    -0.12   0.62  1.17
Texas    0.69  -1.47  0.43
Oregon  -0.10   1.03  1.94

# 对Series
In [36]: frame[&#39;b&#39;].map(f2)
Out[36]:
Utah      -0.68
Ohio      -0.12
Texas      0.69
Oregon    -0.10
Name: b, dtype: object

</code></pre>
<h2 id="排名和排序"><a href="#排名和排序" class="headerlink" title="排名和排序"></a>排名和排序</h2><p>可用<code>sort_index</code>方法进行排序，其中可以设定轴与降序升序</p>
<pre><code class="python">In [42]: frame
Out[42]:
       d  a  b  c
three  0  1  2  3
one    4  5  6  7

In [43]: frame.sort_index()
Out[43]:
       d  a  b  c
one    4  5  6  7
three  0  1  2  3

In [44]: frame.sort_index(axis=1)
Out[44]:
       a  b  c  d
three  1  2  3  0
one    5  6  7  4

# 降序排序，默认ascending=True，为升序
In [45]: frame.sort_index(axis=1, ascending=False)
Out[45]:
       d  c  b  a
three  0  3  2  1
one    4  7  6  5
</code></pre>
<p><code>rank</code>函数可以为各组分配一个平均排名，默认是排名越高数值越大(ascending=True)</p>
<pre><code class="python">In [65]: obj
Out[65]:
0    7
1   -5
2    7
3    4
4    3
5    0
6    4
dtype: int64

In [66]: obj.rank()
Out[66]:
0    6.5
1    1.0
2    6.5
3    4.5
4    3.0
5    2.0
6    4.5
dtype: float64

# 降序排名，因为7，4出现了两次，所以排名带有.5
In [67]: obj.rank(ascending=False)
Out[67]:
0    1.5
1    7.0
2    1.5
3    3.5
4    5.0
5    6.0
6    3.5
dtype: float64

In [68]: obj.rank(method=&#39;first&#39;, ascending=False)
Out[68]:
0    1.0
1    7.0
2    2.0
3    3.0
4    5.0
5    6.0
6    4.0
dtype: float64
</code></pre>
<p>排名时用于破坏平级关系的method选项</p>
<table>
<thead>
<tr>
<th>method</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>average</td>
<td>默认：在相等分组中，为各个值分配平均排名</td>
</tr>
<tr>
<td>min</td>
<td>使用整个分组的最小排名</td>
</tr>
<tr>
<td>max</td>
<td>使用整个分组的最大排名</td>
</tr>
<tr>
<td>first</td>
<td>按值在原始数据中的出现顺序分配排名</td>
</tr>
</tbody>
</table>
<h2 id="带有重复值得轴索引"><a href="#带有重复值得轴索引" class="headerlink" title="带有重复值得轴索引"></a>带有重复值得轴索引</h2><p>虽然许多<code>pandas</code>函数如<code>reindex</code>都要求标签唯一，但这并不是强制性的。</p>
<pre><code class="python">In [69]: obj = Series(range(5), index=[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;c&#39;])

In [70]: obj
Out[70]:
a    0
a    1
b    2
c    3
c    4
dtype: int64

In [71]: obj[&#39;a&#39;]
Out[71]:
a    0
a    1
dtype: int64

In [72]: obj.is_unique
Out[72]: True

In [73]: obj.index.is_unique
Out[73]: False

In [74]: obj[0] = 1

In [75]: obj
Out[75]:
a    1
a    1
b    2
c    3
c    4
dtype: int64

In [76]: obj.is_unique
Out[76]: False
</code></pre>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/Kaer Morhen.mp3'></li>
                
                    
            </ul>
            
            
            
            <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="/img/avatar.jpg" height=300 width=300></img>
                    <p>EwdAger</p>
                    <span>Farewell,good hunter.May you find your worth in the waking world.</span>
                    <dl>
                        <dd><a href="https://github.com/EwdAger" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://twitter.com/Ewd_Ager" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">58 <p>文章</p></a></li>
                    <li><a href="/categories">12 <p>分类</p></a></li>
                    <li><a href="/tags">46 <p>标签</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>目录</h4>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Series"><span class="toc-number">1.</span> <span class="toc-text">Series</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DataFrame"><span class="toc-number">2.</span> <span class="toc-text">DataFrame</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#索引对象"><span class="toc-number">2.1.</span> <span class="toc-text">索引对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#基本功能"><span class="toc-number">3.</span> <span class="toc-text">基本功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#重新索引"><span class="toc-number">3.1.</span> <span class="toc-text">重新索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#丢弃制定轴上的项"><span class="toc-number">3.2.</span> <span class="toc-text">丢弃制定轴上的项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引、选取和过滤"><span class="toc-number">3.3.</span> <span class="toc-text">索引、选取和过滤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#算术运算和数据对齐"><span class="toc-number">3.4.</span> <span class="toc-text">算术运算和数据对齐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在算术方法中填充值"><span class="toc-number">3.5.</span> <span class="toc-text">在算术方法中填充值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DataFrame和Series之间的运算"><span class="toc-number">3.6.</span> <span class="toc-text">DataFrame和Series之间的运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数应用和映射"><span class="toc-number">3.7.</span> <span class="toc-text">函数应用和映射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#排名和排序"><span class="toc-number">3.8.</span> <span class="toc-text">排名和排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#带有重复值得轴索引"><span class="toc-number">3.9.</span> <span class="toc-text">带有重复值得轴索引</span></a></li></ol></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2020
        <span class="gradient-text">
            EwdAger
        </span>.
        <a href="http://www.beian.miit.gov.cn/">湘ICP备16015728号</a>
        <br/>
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.3" target="_blank" rel="noopener">v1.4.3</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>



<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>




<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-149874671-1');
    </script>





<script>
    function initialTyped () {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ["Farewell,good hunter.May you find your worth in the waking world.", "再见，善良的猎人。愿你能在清醒的世界中找到自己的价值。"],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>


    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
    <script>

        var valine = new Valine();

        function initValine(path) {
            if (!path) path = window.location.pathname;
            let language = 'zh-CN';
            if (!language) {
                language = 'en';
            } else {
                language = language.toLowerCase();
            }
            valine.init({
                el: '#vcomments',
                appId: 'ChQ4z1dCRpWqCOD43kU6cGmM-gzGzoHsz',
                appKey: 'pFaAS3aumHDM572YbXkzc3fO',
                notify: 'false',
                verify: 'false',
                avatar: 'retro',
                placeholder: '留下你的评论~',
                visitor: 'true',
                path: path,
                lang: language
            });
        }

        $(document).ready(function () {
            initValine();
        });
    </script>



</html>
